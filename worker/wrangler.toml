name = "yams-repo-worker"
main = "src/worker.ts"
compatibility_date = "2025-09-14"

[vars]
# Base paths inside R2 bucket
APT_PREFIX = "aptrepo"
YUM_PREFIX = "yumrepo"
LATEST_MANIFEST = "latest.json"

[[r2_buckets]]
binding = "REPO_BUCKET"
bucket_name = "yams-repository"
preview_bucket_name = "yams-repository-preview"

# Rate limiting binding (GA since 2025-09-19)
# Applied to downloads and API requests to prevent abuse
[[rate_limit]]
binding = "RATE_LIMITER"
# Simple bucket: 100 requests per 60 seconds per IP
simple = { limit = 100, period = 60 }

[observability]
enabled = true
